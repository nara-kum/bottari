<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user">

	 <!-- 회원가입 -->
    <insert id="insertUser" parameterType="com.example.vo.UserVO">
    
    	<![CDATA[
				insert into users 
				values(#{user_no}, #{id},#{name},#{password},#{email},#{phone},#{birth},#{Join_date})
         ]]>
    </insert>
    
	<!-- user정보 가져오기(세션용) -->
	<select id="selectOneByIdPw" parameterType="com.example.vo.UserVO" resultType="com.example.vo.UserVO">
		
		<![CDATA[
			select 	user_no,
					name
			from users
			where id = #{id}
			and password = #{password}
		]]>
	</select>    
    
	<!-- no로 user정보 가져오기(회원수정폼) -->
	<select id="selectByNo" parameterType="com.example.vo.UserVO" resultType="com.example.vo.UserVO">
		<![CDATA[
			select 	user_no,
					id,
					name,
			        password,
			        email,
			        phone,
			        birth,
			        Join_date
			from users
			where user_no = #{user_no}
		]]>
	</select>    
	
	<!-- 회원정보 수정 -->
	<update id="update" parameterType="com.example.vo.UserVO">
		<![CDATA[
			update users
			set password = #{password},
			    email = #{email}
			where user_no = #{user_no}
		]]>		
	</update>	
    
	<!-- 아이디 중복 체크 -->
	<select id="userSelectById" parameterType="com.example.vo.UserVO" resultType="com.example.vo.UserVO" >
		
		<![CDATA[
	    		select * from users 
	    		where id = #{id}
	    ]]>
	</select>
	
	<!-- 아이디사용유무체크(회원가입) -->
	<!-- <select id="selectOneById" parameterType="string" resultType="com.javaex.vo.UserVO">
		<![CDATA[
			select 	user_no,
					id,
			        name,
			        email
			from users
			where id=#{id}
		]]>
	</select>     -->	
	
	<!-- 로그인 -->
    <select id="selectIdPw" parameterType="com.example.vo.UserVO" resultType="com.example.vo.UserVO">
    
    	<![CDATA[
				select user_no userNo
					, id
					, name
				from users
				where id = #{id}
				and password = #{password}
         ]]>
    </select>

</mapper>