<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="product">

 	<!-- 상품 등록 -->
    <insert id="insert" parameterType="com.example.vo.ProductVO">
    	<![CDATA[
	        insert into product
	        values (null, #{category_no}, #{title}, #{price}, #{brand}, #{itemimg},
	         		#{shipping_yn}, #{shipping_cost}, #{zipcode}, #{address}, #{detail_address})
         ]]>
    </insert>


	
	
 <!-- 상품 상세 조회 - ProductTotalVO 사용 -->
    <select id="selectOne" parameterType="int" resultType="com.example.vo.ProductTotalVO">
        <![CDATA[
	        SELECT  p.product_no,
	                p.category_no,
	                c.category_title,
	                p.title,
	                p.price,
	                p.brand,
	                p.itemimg,
	                p.shipping_yn,
	                p.shipping_cost,
	                p.zipcode,
	                p.address,
	                p.detail_address,
	                o.option_no,
	                o.detailOPtion_no,
	                o.option_name,
	                do.detailOPtion_name,
	                di.detailedImage_no,
	                di.image_URL,
	                di.turn
	        FROM product p
	        LEFT JOIN category c ON p.category_no = c.category_no
	        LEFT JOIN product_option o ON p.product_no = o.product_no
	        LEFT JOIN detail_option do ON o.detailOPtion_no = do.detailOPtion_no
	        LEFT JOIN detailed_image di ON p.product_no = di.product_no
	        WHERE p.product_no = #{product_no}
	        ORDER BY di.turn, o.option_no
        ]]>
    </select>





</mapper>