<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="funding">

<!-- 내 펀딩 목록 -->
  <select id="selectMyFundingList" parameterType="int" resultType="com.example.vo.WishlistVO">
    <![CDATA[
      SELECT
          fp.funding_no         AS fundingNo
        , fp.event_no           AS eventNo
        , fp.user_no            AS userNo
        , fp.product_no         AS productNo
        , fp.percent            AS percent
        , fp.amount             AS amount
        , fp.funding_status     AS fundingStatus
        , CONCAT(DATE_FORMAT(fp.funding_date, '%Y.%m.%d'), ' | ', IFNULL(c.event_name,'')) AS fundingDate
        , p.brand               AS brand
        , p.title               AS title
        , p.price               AS price
        , p.itemimg             AS image
        , od.detailoption_name  AS detailoptionName
		, c.event_name          AS eventName
      FROM funding_product fp
      JOIN product p
        ON p.product_no = fp.product_no
      LEFT JOIN funding_option fo
        ON fo.funding_no = fp.funding_no
      LEFT JOIN option_detail od
        ON od.detailoption_no = fo.detailoption_no
      LEFT JOIN calender c
		ON c.event_no = fp.event_no
      WHERE fp.user_no = #{value}
      ORDER BY fp.funding_no DESC
    ]]>
  </select>


</mapper>